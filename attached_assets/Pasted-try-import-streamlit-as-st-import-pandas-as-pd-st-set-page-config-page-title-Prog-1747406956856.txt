try:
    import streamlit as st
    import pandas as pd

    st.set_page_config(page_title="Programa√ß√£o Pensilina Igarap√©", layout="centered")

    st.title("PROGRAMA√á√ÉO PENSILINA IGARAP√â")
    st.subheader("üìÖ 28/04/2025")

    # Dados iniciais
    cargas_data = {
        "CARGAS": [
            "CARGAS FORMADAS PELO 1¬∫ TURNO DIA SEGUINTE",
            "CARGAS FORMADAS PELO 1¬∫ TURNO FECHAMENTO",
            "CARGAS FORMADAS PELO 2¬∫ TURNO DIA SEGUINTE",
            "CARGAS FORMADAS PELO 2¬∫ TURNO FECHAMENTO",
            "CARGAS FORMADAS PELO 3¬∫ TURNO DIA SEGUINTE",
            "CARGAS FORMADAS PELO 3¬∫ TURNO FECHAMENTO"
        ],
        "QTD. CARGAS": [0, 66, 36, 65, 13, 0],
        "QTD. VE√çCULOS": [0, 707, 388, 713, 141, 0],
        "TOTAL": [707, 707, 1101, 713, 141, 0]
    }

    df = pd.DataFrame(cargas_data)

    # Edi√ß√£o dos dados
    st.markdown("### Tabela de Cargas")
    # edited_df = st.data_editor(
    #     df,
    #     num_rows="fixed",
    #     use_container_width=True
    # )
    edited_df = df  # N√£o permite edi√ß√£o, apenas visualiza√ß√£o

    # Totais autom√°ticos
    total_cargas = edited_df["QTD. CARGAS"].sum()
    total_veiculos = edited_df["QTD. VE√çCULOS"].sum()

    try:
        total_total = edited_df["TOTAL"].sum()
    except:
        total_total = 0

    # Linha de totais
    total_row = pd.DataFrame({
        "CARGAS": ["TOTAL"],
        "QTD. CARGAS": [total_cargas],
        "QTD. VE√çCULOS": [total_veiculos],
        "TOTAL": [total_total]
    })

    # Exibir tabela final com totais (apenas uma vez)
    st.dataframe(pd.concat([edited_df, total_row], ignore_index=True), use_container_width=True)

    # Legenda
    st.markdown("---")
    st.markdown("### LEGENDA P/ CARGAS")
    st.table({
        "TURNO": ["1¬∫ TURNO", "2¬∫ TURNO", "3¬∫ TURNO"],
        "C√ìDIGOS": ["1 e 2", "3 e 4", "5 e 6"]
    })

    # Cargas do dia
    st.markdown("### Status do Dia")
    col1, col2 = st.columns(2)
    col1.metric("Cargas pra formar hoje", 201)
    col2.metric("Cargas j√° formadas pra hoje", 178)

except ModuleNotFoundError:
    print("Erro: O m√≥dulo 'streamlit' n√£o est√° instalado.\n\nPara rodar este aplicativo, instale o Streamlit com:\n  pip install streamlit\n\nE depois execute:\n  streamlit run app.py")
